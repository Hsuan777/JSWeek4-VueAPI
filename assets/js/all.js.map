{"version":3,"sources":["all.js","test.js"],"names":["Vue","component","template","data","props","pages","type","Object","methods","emitPages","item","$emit","app","el","product","title","category","content","description","imageUrl","enabled","origin_price","price","unit","hexAPI","personID","apiPath","user","email","password","pagination","temporary","login","e","vm","preventDefault","axios","post","then","res","token","expired","document","cookie","Date","window","location","error","console","log","signout","tokenName","getData","page","replace","defaults","headers","common","Authorization","get","meta","addProduct","initData","assign","copyData","updateData","id","forEach","patch","cleanDate","deleteData","created","mounted","fn"],"mappings":"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","file":"all.js","sourcesContent":["// Vue.component必須要放前面才不會報錯\r\n// Vue.component(`網頁標籤元件名稱`, {})\r\nVue.component(`pagination`, {\r\n  // 建立樣板\r\n  template: `\r\n  <nav aria-label=\"Page navigation example\">\r\n    <ul class=\"pagination mx-auto\">\r\n      <li class=\"page-item\" v-if=\"pages.current_page != 1\">\r\n        <a class=\"page-link\" href=\"#\" aria-label=\"Previous\" @click.prevent=\"emitPages(pages.current_page - 1)\">\r\n          <span aria-hidden=\"true\">&laquo;</span>\r\n        </a>\r\n      </li>\r\n      <li class=\"page-item\" v-for=\"(item, index) in pages.total_pages\" :key=\"index\">\r\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"emitPages(item)\">\r\n          {{ item }}\r\n        </a>\r\n      </li>\r\n      \r\n      <li class=\"page-item\" v-if=\"pages.current_page != pages.total_pages\">\r\n        <a class=\"page-link\" href=\"#\" aria-label=\"Next\" @click.prevent=\"emitPages(pages.current_page + 1)\">\r\n          <span aria-hidden=\"true\">&raquo;</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </nav>`,\r\n  // 定義資料，元件的 data必須使用 return的方式回傳資料，與 new Vue的 data不同\r\n  data() {\r\n    return {\r\n      // 此元件只會讀取該元件的 data資料\r\n    };\r\n  },\r\n  // 定義樣板屬性，用陣列方式定義，接著在網頁中寫 pages=某值或其他函式，資料就會寫入樣板中\r\n  // 但是範例為什麼是用物件? 可用來驗證傳入的資料，驗證型別(type)、自訂條件(validator)、預設值(default)等等\r\n  // props: [`pages`],\r\n  props: {\r\n    // pages:Object, //直接指定型別\r\n    pages:{\r\n      type:Object,\r\n      // validator:,\r\n      // default:``,\r\n    }\r\n  },\r\n  methods:{\r\n    emitPages(item){\r\n      this.$emit(`emit-pages`, item);\r\n    },\r\n  },\r\n})\r\n\r\nlet app = new Vue({\r\n  el: `#app`,\r\n  data: {\r\n    product: {\r\n      title: \"test\",\r\n      category: \"testCategory\",\r\n      content: \"test\",\r\n      description: \"test\",\r\n      imageUrl: [\"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1351&q=80\"],\r\n      enabled: true,\r\n      origin_price: `2000`,\r\n      price: `1000`,\r\n      unit: \"單位\"\r\n    },\r\n    hexAPI: {\r\n      personID: `85a8cd22-1b7d-43af-9b5a-5aa679129559`,\r\n      apiPath: `https://course-ec-api.hexschool.io/api/`,\r\n      data: [],\r\n    },\r\n    user: {\r\n      email: ``,\r\n      password: ``,\r\n    },\r\n    pagination:{},\r\n    temporary: [],\r\n  },\r\n  methods: {\r\n    // 功能類 //\r\n    login(e) {\r\n      let vm = this;\r\n      e.preventDefault();\r\n      axios\r\n        .post(`${this.hexAPI.apiPath}auth/login`, this.user)\r\n        .then((res) => {\r\n          // 1. 送出驗證資訊後，驗證完畢取得 token以及到期日(expired)\r\n          const token = res.data.token;\r\n          const expired = res.data.expired;\r\n          // 2. 取得上述的值後，就把它們存在 cookie，以便使用者在期限內再次登入\r\n          // 參考 document.cookie MDN\r\n          // someCookieName可自定義，true改成 傳送回來的 token\r\n          // 到期日則是用 new Data()的方式\r\n          document.cookie = `hexToken=${token}; expires=${new Date(expired * 1000)}; path=/`;\r\n          //清空\r\n          vm.user.email = ``;\r\n          vm.user.password = ``;\r\n          // 跳轉頁面\r\n          window.location = \"products.html\";\r\n\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        })\r\n    },\r\n    signout(e) {\r\n      e.preventDefault();\r\n      // 將存放在瀏覽器的 cookie清空\r\n      document.cookie = `hexToken=; expires=; path=/`;\r\n      this.hexAPI.data = [];\r\n      this.hexAPI.token = ``,\r\n      this.hexAPI.tokenName = ``,\r\n      window.location = \"index.html\";\r\n    },\r\n    /* 取得遠端 API資料 */\r\n    // 預設為 1\r\n    getData(page = 1) {\r\n      let vm = this;\r\n      // axios的驗證指令，Bearer是後端用的\r\n      const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\r\n      axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n      axios\r\n        // 原本是 products ->最終結果是取得所有資料\r\n        // 改成 products?page=${page} -> 由後端給第一頁資料\r\n        .get(`${vm.hexAPI.apiPath}${vm.hexAPI.personID}/admin/ec/products?page=${page}`) \r\n        .then((res) => {\r\n          // 取得該頁資料\r\n          vm.hexAPI.data = res.data.data;\r\n          // 取得分頁資訊\r\n          vm.pagination = res.data.meta.pagination;\r\n        });\r\n    },\r\n    /* 新增資料 */\r\n    addProduct() {\r\n      let vm = this;\r\n      const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\r\n      axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n      axios\r\n        .post(`${this.hexAPI.apiPath}${vm.hexAPI.personID}/admin/ec/product`, vm.temporary)\r\n        .then(() => {\r\n          vm.getData();\r\n        });\r\n    },\r\n    /* 新建資料 */\r\n    // 將 this.product的屬性值複製到暫存\r\n    initData() {\r\n      this.temporary = Object.assign({}, this.product);\r\n    },\r\n    /* 複製資料 */\r\n    // 將 v-for所取出的 item放入暫存\r\n    copyData(item) {\r\n      this.temporary = Object.assign({}, item);\r\n    },\r\n    /* 修改資料 */\r\n    updateData() {\r\n      let vm = this;\r\n      // if判斷，若有值則為 true\r\n      if (vm.temporary.id) {\r\n        vm.hexAPI.data.forEach((item) => {\r\n          if (vm.temporary.id === item.id) {\r\n            const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\r\n            axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n            // patch跟 post一樣需要兩個參數 patch(`API網址`, 單一物件資料)，否則不會變更\r\n            axios\r\n              .patch(`${this.hexAPI.apiPath}${vm.hexAPI.personID}/admin/ec/product/${vm.temporary.id}`, vm.temporary)\r\n              .then(() => {\r\n                vm.getData();\r\n                vm.cleanDate();\r\n              });\r\n          }\r\n        })\r\n      } else {\r\n        vm.addProduct();\r\n      }\r\n      vm.cleanDate();\r\n    },\r\n    /* 刪除資料 */\r\n    deleteData() {\r\n      let vm = this;\r\n      vm.hexAPI.data.forEach((item) => {\r\n        if (vm.temporary.id === item.id) {\r\n          const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\r\n          axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n          axios\r\n            .delete(`${this.hexAPI.apiPath}${vm.hexAPI.personID}/admin/ec/product/${vm.temporary.id}`)\r\n            .then(() => {\r\n              vm.getData();\r\n              vm.cleanDate();\r\n            });\r\n        }\r\n      })\r\n    },\r\n    // 工具類 //\r\n    cleanDate() {\r\n      this.temporary = {};\r\n    },\r\n  },\r\n  // 資料建立之後，適合處理資料\r\n  created() {\r\n    // 要執行的命令都寫在同一檔案，會造成一起執行\r\n    // 必須拆分檔案\r\n    if( this.hexAPI.tokenName === ``){\r\n      window.location = \"index.html\";\r\n    }\r\n    this.getData();\r\n  },\r\n  // 元件渲染 html後，適合處理 DOM\r\n  mounted() {\r\n    \r\n  }\r\n})\r\n\r\n\r\n","const fn =()=>{\r\n  console.log(`c8c8 c8 `);\r\n};\r\n\r\nexport{ fn};"]}